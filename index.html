<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>M &amp; D</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="June &amp; July">
<meta property="og:type" content="website">
<meta property="og:title" content="M &amp; D">
<meta property="og:url" content="https://dontcallmilanac.github.io/index.html">
<meta property="og:site_name" content="M &amp; D">
<meta property="og:description" content="June &amp; July">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="qibw">
<meta property="article:tag" content="fe,web">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="M &amp; D" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">M &amp; D</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://dontcallmilanac.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-pubsub-vs-observer" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/03/13/pubsub-vs-observer/" class="article-date">
  <time datetime="2021-03-12T23:57:16.000Z" itemprop="datePublished">2021-03-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web/">web</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/03/13/pubsub-vs-observer/">pubsub-vs-observer</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="面试官问，发布订阅和观察者有啥区别？"><a href="#面试官问，发布订阅和观察者有啥区别？" class="headerlink" title="面试官问，发布订阅和观察者有啥区别？"></a>面试官问，发布订阅和观察者有啥区别？</h2><p>一脸懵逼？仔细想想，不难。且听娓娓道来。</p>
<h2 id="什么是发布订阅"><a href="#什么是发布订阅" class="headerlink" title="什么是发布订阅"></a>什么是发布订阅</h2><ul>
<li>你想知道某事发生，就需要实时监控着，时不时去看看，到底发没发生？</li>
<li>但这很傻，到底应该多久看一次呢？而且总去看也不是事儿，所以你问我能不能主动告诉你呢？</li>
<li>答案终于呼之欲出：能啊，你订阅我，我就给你发布！</li>
</ul>
<h2 id="每个人都用过！"><a href="#每个人都用过！" class="headerlink" title="每个人都用过！"></a>每个人都用过！</h2><ul>
<li>js 的事件模型其实就是发布订阅！事件都是不一定啥时发生的，所以我们想要监控事件的发生，就要提前写好相应的回调，相当于订阅了这个事件的发生。而 js 引擎就负责实现其中逻辑。最终事件由触发者来触发，这里可以是真实事件，也可以是代码模拟出的。所以发布订阅也可称为自定义事件。</li>
</ul>
<h2 id="最简单的发布订阅"><a href="#最简单的发布订阅" class="headerlink" title="最简单的发布订阅"></a>最简单的发布订阅</h2><ul>
<li>A 想知道 B 是否发生，很简单，A 订阅 B，B 发布即可。代码如下：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// B为发布者</span></span><br><span class="line"><span class="keyword">const</span> B = &#123;</span><br><span class="line">  cbList: [], <span class="comment">// 需把所有订阅者想做的事都存起来</span></span><br><span class="line">  <span class="function"><span class="title">onSub</span>(<span class="params">cb</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 被订阅时的动作</span></span><br><span class="line">    <span class="built_in">this</span>.cbList.push(cb);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">pub</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 发布时依次执行列表里的回调</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; <span class="built_in">this</span>.cbList.length; index++) &#123;</span><br><span class="line">      <span class="keyword">const</span> cb = <span class="built_in">this</span>.cbList[index];</span><br><span class="line">      cb.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// A为订阅者，诉求很简单，告诉我！</span></span><br><span class="line"><span class="keyword">const</span> A = &#123;</span><br><span class="line">  <span class="function"><span class="title">tellMe</span>(<span class="params">msg</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;tellMe&quot;</span>, msg);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">tellMeAgain</span>(<span class="params">msg</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;tellMeAgain&quot;</span>, msg);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">B.onSub(A.tellMe); <span class="comment">// A订阅了B</span></span><br><span class="line">B.onSub(A.tellMeAgain); <span class="comment">// A又订阅了B</span></span><br><span class="line">B.pub(<span class="string">&quot;我发生了&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="两个小问题"><a href="#两个小问题" class="headerlink" title="两个小问题"></a>两个小问题</h2><ul>
<li>现在 A 只知道 B 发生了，其他关于 B 的事情一概不知。假设还想知道 B 结束了，咋办？</li>
<li>A 一旦订阅了 B，再想反悔不想订阅了，好像做不到。</li>
<li>所以，上述最简单的例子可以再改改，加个订阅的类型，以及支持取消订阅。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// B为发布者</span></span><br><span class="line"><span class="keyword">const</span> B = &#123;</span><br><span class="line">  cbObj: &#123;&#125;, <span class="comment">// 需把所有订阅者想做的事都存起来</span></span><br><span class="line">  <span class="function"><span class="title">onSub</span>(<span class="params">type, cb</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 被订阅时的动作</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.cbObj[type]) &#123;</span><br><span class="line">      <span class="built_in">this</span>.cbObj[type] = [];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.cbObj[type].push(cb);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">onCancelSub</span>(<span class="params">type, cb</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.cbObj[type]) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> len = <span class="built_in">this</span>.cbObj[type].length; len &gt; <span class="number">0</span>; len--) &#123;</span><br><span class="line">      <span class="keyword">const</span> fn = <span class="built_in">this</span>.cbObj[type][len - <span class="number">1</span>];</span><br><span class="line">      <span class="keyword">if</span> (fn === cb) &#123;</span><br><span class="line">        <span class="built_in">this</span>.cbObj[type].splice(len - <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">pub</span>(<span class="params">...rest</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 发布时依次执行列表里的回调</span></span><br><span class="line">    <span class="keyword">const</span> type = rest.shift();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; <span class="built_in">this</span>.cbObj[type].length; index++) &#123;</span><br><span class="line">      <span class="keyword">const</span> cb = <span class="built_in">this</span>.cbObj[type][index];</span><br><span class="line">      cb.apply(<span class="built_in">this</span>, rest);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// A为订阅者，诉求很简单，告诉我！</span></span><br><span class="line"><span class="keyword">const</span> A = &#123;</span><br><span class="line">  <span class="function"><span class="title">tellMe</span>(<span class="params">msg</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;tellMe&quot;</span>, msg);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">tellMeAgain</span>(<span class="params">msg</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;tellMeAgain&quot;</span>, msg);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">B.onSub(<span class="string">&quot;start&quot;</span>, A.tellMe); <span class="comment">// A订阅了B</span></span><br><span class="line">B.onCancelSub(<span class="string">&quot;start&quot;</span>, A.tellMe); <span class="comment">// A取消订阅了B</span></span><br><span class="line">B.onSub(<span class="string">&quot;over&quot;</span>, A.tellMeAgain); <span class="comment">// A又订阅了B</span></span><br><span class="line">B.pub(<span class="string">&quot;start&quot;</span>, <span class="string">&quot;我发生了&quot;</span>);</span><br><span class="line">B.pub(<span class="string">&quot;over&quot;</span>, <span class="string">&quot;我结束了&quot;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>至此，其实已经实现了一般意义上的观察者模式，发现了吗？最简单的发布订阅就是观察者模式！</li>
<li>那标准意义上的发布订阅还有什么区别呢？答案马上揭晓</li>
<li>上述的例子有点死板，因为无论谁订阅，订阅谁，总是要直接调用相关对象的方法，这就形成了深耦合，不利于扩展，所以能否做一些统一的封装工作，帮助我们管理这些订阅发布的动作？</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// B改为通用的发布者</span></span><br><span class="line"><span class="keyword">const</span> PUB = &#123;</span><br><span class="line">  cbObj: &#123;&#125;, <span class="comment">// 需把所有订阅者想做的事都存起来</span></span><br><span class="line">  <span class="function"><span class="title">onSub</span>(<span class="params">type, cb</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 被订阅时的动作</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.cbObj[type]) &#123;</span><br><span class="line">      <span class="built_in">this</span>.cbObj[type] = [];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.cbObj[type].push(cb);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">onCancelSub</span>(<span class="params">type, cb</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.cbObj[type]) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> len = <span class="built_in">this</span>.cbObj[type].length; len &gt; <span class="number">0</span>; len--) &#123;</span><br><span class="line">      <span class="keyword">const</span> fn = <span class="built_in">this</span>.cbObj[type][len - <span class="number">1</span>];</span><br><span class="line">      <span class="keyword">if</span> (fn === cb) &#123;</span><br><span class="line">        <span class="built_in">this</span>.cbObj[type].splice(len - <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">pub</span>(<span class="params">...rest</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 发布时依次执行列表里的回调</span></span><br><span class="line">    <span class="keyword">const</span> type = rest.shift();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; <span class="built_in">this</span>.cbObj[type].length; index++) &#123;</span><br><span class="line">      <span class="keyword">const</span> cb = <span class="built_in">this</span>.cbObj[type][index];</span><br><span class="line">      cb.apply(<span class="built_in">this</span>, rest);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 部署通用版发布</span></span><br><span class="line"><span class="keyword">var</span> deployPub = <span class="function"><span class="keyword">function</span> (<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> PUB) &#123;</span><br><span class="line">    obj[i] = PUB[i];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> B = &#123;&#125;;</span><br><span class="line">deployPub(B); <span class="comment">//这样B就具有了发布功能</span></span><br><span class="line"><span class="comment">// 继续用A测试</span></span><br><span class="line"><span class="keyword">const</span> A = &#123;</span><br><span class="line">  <span class="function"><span class="title">tellMe</span>(<span class="params">msg</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;tellMe&quot;</span>, msg);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">tellMeAgain</span>(<span class="params">msg</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;tellMeAgain&quot;</span>, msg);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">B.onSub(<span class="string">&quot;start&quot;</span>, A.tellMe); <span class="comment">// A订阅了B</span></span><br><span class="line">B.onCancelSub(<span class="string">&quot;start&quot;</span>, A.tellMe); <span class="comment">// A取消订阅了B</span></span><br><span class="line">B.onSub(<span class="string">&quot;over&quot;</span>, A.tellMeAgain); <span class="comment">// A又订阅了B</span></span><br><span class="line">B.pub(<span class="string">&quot;start&quot;</span>, <span class="string">&quot;我发生了&quot;</span>);</span><br><span class="line">B.pub(<span class="string">&quot;over&quot;</span>, <span class="string">&quot;我结束了&quot;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>再仔细观察一下，是不是貌似不需要把 B 每次都变成所谓的通用发布者，因为 A 订阅时，已经不关注订阅的对象是谁了，而只关注订阅的事件类型。</li>
<li>所以，可以进一步理解为发布订阅模式就是这样一种模式，即通过“中间人”的角色，完成所有类型事件的订阅。这个中间人只负责收集订阅者，和向所有订阅者发布消息。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// PUB即为中间人</span></span><br><span class="line"><span class="keyword">const</span> PUB = &#123;</span><br><span class="line">  cbObj: &#123;&#125;, <span class="comment">// 需把所有订阅者想做的事都存起来</span></span><br><span class="line">  <span class="function"><span class="title">onSub</span>(<span class="params">type, cb</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 被订阅时的动作</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.cbObj[type]) &#123;</span><br><span class="line">      <span class="built_in">this</span>.cbObj[type] = [];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>.cbObj[type].push(cb);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">onCancelSub</span>(<span class="params">type, cb</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.cbObj[type]) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> len = <span class="built_in">this</span>.cbObj[type].length; len &gt; <span class="number">0</span>; len--) &#123;</span><br><span class="line">      <span class="keyword">const</span> fn = <span class="built_in">this</span>.cbObj[type][len - <span class="number">1</span>];</span><br><span class="line">      <span class="keyword">if</span> (fn === cb) &#123;</span><br><span class="line">        <span class="built_in">this</span>.cbObj[type].splice(len - <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">pub</span>(<span class="params">...rest</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// 发布时依次执行列表里的回调</span></span><br><span class="line">    <span class="keyword">const</span> type = rest.shift();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; <span class="built_in">this</span>.cbObj[type].length; index++) &#123;</span><br><span class="line">      <span class="keyword">const</span> cb = <span class="built_in">this</span>.cbObj[type][index];</span><br><span class="line">      cb.apply(<span class="built_in">this</span>, rest);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 继续用A测试</span></span><br><span class="line"><span class="keyword">const</span> A = &#123;</span><br><span class="line">  <span class="function"><span class="title">tellMe</span>(<span class="params">msg</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;tellMe&quot;</span>, msg);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">tellMeAgain</span>(<span class="params">msg</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;tellMeAgain&quot;</span>, msg);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">PUB.onSub(<span class="string">&quot;start&quot;</span>, A.tellMe); <span class="comment">// A订阅了start</span></span><br><span class="line">PUB.onCancelSub(<span class="string">&quot;start&quot;</span>, A.tellMe); <span class="comment">// A取消订阅了start</span></span><br><span class="line">PUB.onSub(<span class="string">&quot;over&quot;</span>, A.tellMeAgain); <span class="comment">// A又订阅了over</span></span><br><span class="line">PUB.pub(<span class="string">&quot;start&quot;</span>, <span class="string">&quot;我发生了&quot;</span>);</span><br><span class="line">PUB.pub(<span class="string">&quot;over&quot;</span>, <span class="string">&quot;我结束了&quot;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>其实还可以再加上更高级的一些功能，例如支持离线消息，即发布时还没订阅，订阅晚于发布时间；还有支持命名空间等，因为总是把所有类型的事件放在一起，用一个字符串表示，难免最后会乱。最后是终极代码，直接照抄了原书作者的版本。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Event = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> <span class="built_in">global</span> = <span class="built_in">this</span>,</span><br><span class="line">    Event,</span><br><span class="line">    _default = <span class="string">&quot;default&quot;</span>;</span><br><span class="line">  Event = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _listen,</span><br><span class="line">      _trigger,</span><br><span class="line">      _remove,</span><br><span class="line">      _slice = <span class="built_in">Array</span>.prototype.slice,</span><br><span class="line">      _shift = <span class="built_in">Array</span>.prototype.shift,</span><br><span class="line">      _unshift = <span class="built_in">Array</span>.prototype.unshift,</span><br><span class="line">      namespaceCache = &#123;&#125;,</span><br><span class="line">      _create,</span><br><span class="line">      find,</span><br><span class="line">      each = <span class="function"><span class="keyword">function</span> (<span class="params">ary, fn</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> ret;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, l = ary.length; i &lt; l; i++) &#123;</span><br><span class="line">          <span class="keyword">var</span> n = ary[i];</span><br><span class="line">          ret = fn.call(n, i, n);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">      &#125;;</span><br><span class="line">    _listen = <span class="function"><span class="keyword">function</span> (<span class="params">key, fn, cache</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (!cache[key]) &#123;</span><br><span class="line">        cache[key] = [];</span><br><span class="line">      &#125;</span><br><span class="line">      cache[key].push(fn);</span><br><span class="line">    &#125;;</span><br><span class="line">    _remove = <span class="function"><span class="keyword">function</span> (<span class="params">key, cache, fn</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (cache[key]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (fn) &#123;</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">var</span> i = cache[key].length; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">if</span> (cache[key][i] === fn) &#123;</span><br><span class="line">              cache[key].splice(i, <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          cache[key] = [];</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    _trigger = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> cache = _shift.call(<span class="built_in">arguments</span>),</span><br><span class="line">        key = _shift.call(<span class="built_in">arguments</span>),</span><br><span class="line">        args = <span class="built_in">arguments</span>,</span><br><span class="line">        _self = <span class="built_in">this</span>,</span><br><span class="line">        ret,</span><br><span class="line">        stack = cache[key];</span><br><span class="line">      <span class="keyword">if</span> (!stack || !stack.length) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> each(stack, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.apply(_self, args);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">    _create = <span class="function"><span class="keyword">function</span> (<span class="params">namespace</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> namespace = namespace || _default;</span><br><span class="line">      <span class="keyword">var</span> cache = &#123;&#125;,</span><br><span class="line">        offlineStack = [], <span class="comment">// 离线事件</span></span><br><span class="line">        ret = &#123;</span><br><span class="line">          listen: <span class="function"><span class="keyword">function</span> (<span class="params">key, fn, last</span>) </span>&#123;</span><br><span class="line">            _listen(key, fn, cache);</span><br><span class="line">            <span class="keyword">if</span> (offlineStack === <span class="literal">null</span>) &#123;</span><br><span class="line">              <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (last === <span class="string">&quot;last&quot;</span>) &#123;</span><br><span class="line">              offlineStack.length &amp;&amp; offlineStack.pop()();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              each(offlineStack, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="built_in">this</span>();</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            offlineStack = <span class="literal">null</span>;</span><br><span class="line">          &#125;,</span><br><span class="line">          one: <span class="function"><span class="keyword">function</span> (<span class="params">key, fn, last</span>) </span>&#123;</span><br><span class="line">            _remove(key, cache);</span><br><span class="line">            <span class="built_in">this</span>.listen(key, fn, last);</span><br><span class="line">          &#125;,</span><br><span class="line">          remove: <span class="function"><span class="keyword">function</span> (<span class="params">key, fn</span>) </span>&#123;</span><br><span class="line">            _remove(key, cache, fn);</span><br><span class="line">          &#125;,</span><br><span class="line">          trigger: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> fn,</span><br><span class="line">              args,</span><br><span class="line">              _self = <span class="built_in">this</span>;</span><br><span class="line">            _unshift.call(<span class="built_in">arguments</span>, cache);</span><br><span class="line">            args = <span class="built_in">arguments</span>;</span><br><span class="line">            fn = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">              <span class="keyword">return</span> _trigger.apply(_self, args);</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">if</span> (offlineStack) &#123;</span><br><span class="line">              <span class="keyword">return</span> offlineStack.push(fn);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> fn();</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;;</span><br><span class="line">      <span class="keyword">return</span> namespace</span><br><span class="line">        ? namespaceCache[namespace]</span><br><span class="line">          ? namespaceCache[namespace]</span><br><span class="line">          : (namespaceCache[namespace] = ret)</span><br><span class="line">        : ret;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      create: _create,</span><br><span class="line">      one: <span class="function"><span class="keyword">function</span> (<span class="params">key, fn, last</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> event = <span class="built_in">this</span>.create();</span><br><span class="line">        event.one(key, fn, last);</span><br><span class="line">      &#125;,</span><br><span class="line">      remove: <span class="function"><span class="keyword">function</span> (<span class="params">key, fn</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> event = <span class="built_in">this</span>.create();</span><br><span class="line">        event.remove(key, fn);</span><br><span class="line">      &#125;,</span><br><span class="line">      listen: <span class="function"><span class="keyword">function</span> (<span class="params">key, fn, last</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> event = <span class="built_in">this</span>.create();</span><br><span class="line">        event.listen(key, fn, last);</span><br><span class="line">      &#125;,</span><br><span class="line">      trigger: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> event = <span class="built_in">this</span>.create();</span><br><span class="line">        event.trigger.apply(<span class="built_in">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;)();</span><br><span class="line">  <span class="keyword">return</span> Event;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<ul>
<li>最后总结一下，观察者模式是这种模式的最初思想，为了实现不同对象间的解耦合。</li>
<li>自此基础上发展出了发布订阅模式，通过中间人的角色，统一来管理所有消息的订阅和发布。</li>
<li>后续的功能，例如离线消息、命名空间等，更是为这一模式更加增光添彩如虎添翼。</li>
<li>总之，这种设计模式的思想非常经典，也应用于很多大型复杂软件之中，掌握这种模式还是非常必要的。</li>
</ul>
<h2 id="最后补充"><a href="#最后补充" class="headerlink" title="最后补充"></a>最后补充</h2><ul>
<li>其实还有一种写法是，订阅者和发布者的角色不局限于某一对象，即订阅者同时也可发布，发布者也可订阅。</li>
<li>看起来更好理解，更像是字面意思上的观察者，互相订阅，也是互相观察。</li>
<li>这种写法的最简版（观察者模式）就是互相观察，深度耦合；升级版也是使用中间人，统一管理订阅发布行为，从而进化为发布订阅模式。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dontcallmilanac.github.io/2021/03/13/pubsub-vs-observer/" data-id="ckm7ijf9p0000ddre19j21zsd" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/design-pattern/" rel="tag">design pattern</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85-%E8%A7%82%E5%AF%9F%E8%80%85/" rel="tag">发布订阅/观察者</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-antd-combobox" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/11/16/antd-combobox/" class="article-date">
  <time datetime="2020-11-16T10:04:54.000Z" itemprop="datePublished">2020-11-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web/">web</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/11/16/antd-combobox/">antd-combobox</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-combobox"><a href="#1-combobox" class="headerlink" title="1. combobox"></a>1. combobox</h3><ul>
<li>使用antd时，需要一个combobox场景。即选择框也可输入自定义内容。</li>
<li>但是antd貌似没有这个组件，可以用AutoComplete组件来实现。</li>
</ul>
<h3 id="2-实现要点"><a href="#2-实现要点" class="headerlink" title="2. 实现要点"></a>2. 实现要点</h3><ul>
<li><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;AutoComplete</span><br><span class="line">  value=&#123;payment_terms&#125;</span><br><span class="line">  style=&#123;&#123; <span class="attr">width</span>: <span class="number">100</span> &#125;&#125;</span><br><span class="line">  onChange=&#123;<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.changePaymentTerm(<span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.validatePaymentTerms(value)&#125;</span>`</span>);</span><br><span class="line">  &#125;&#125;</span><br><span class="line">  dataSource=&#123;paymentTermsList.map(<span class="function">(<span class="params">item</span>) =&gt;</span> <span class="string">`<span class="subst">$&#123;item&#125;</span>`</span>)&#125;</span><br><span class="line">&gt;&lt;/AutoComplete&gt;</span><br></pre></td></tr></table></figure></li>
<li>提前设置好dataSource，即可选择的列表。</li>
<li>因为AutoComplete就是可以输入来搜索的，所以就实现了既可以输入，也可以搜索的功能。</li>
<li>注意点：控制onChange，既可以实现输入内容校验和替换，也是设置了当输入自定义内容时，即为下拉选择无可选项。直接设置值即可。</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 强制处理为数字</span></span><br><span class="line">validatePaymentTerms = <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">Number</span>.isNaN(<span class="built_in">Number</span>(value))) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (value &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.abs(value);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.round(value);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://dontcallmilanac.github.io/2020/11/16/antd-combobox/" data-id="ckm6xtqnf0008vure9qzt633m" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/antd/" rel="tag">antd</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react/" rel="tag">react</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-bpmn-custom" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/10/30/bpmn-custom/" class="article-date">
  <time datetime="2019-10-30T06:22:34.000Z" itemprop="datePublished">2019-10-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web/">web</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/10/30/bpmn-custom/">bpmn-js自定义开发</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-基于开源工具库-bpmn-js-5-0-版本，对源码进行修改、自定义，通过二次开发实现。"><a href="#1-基于开源工具库-bpmn-js-5-0-版本，对源码进行修改、自定义，通过二次开发实现。" class="headerlink" title="1. 基于开源工具库 bpmn-js 5.0 版本，对源码进行修改、自定义，通过二次开发实现。"></a>1. 基于开源工具库 <a target="_blank" rel="noopener" href="https://github.com/bpmn-io/bpmn-js">bpmn-js</a> 5.0 版本，对源码进行修改、自定义，通过二次开发实现。</h3><h3 id="2-代码主要改动介绍"><a href="#2-代码主要改动介绍" class="headerlink" title="2. 代码主要改动介绍"></a>2. 代码主要改动介绍</h3><ul>
<li>styles/assets 样式文件，左侧调色板的图标样式</li>
<li>lib/Viewer.js bpmn-moddle 是引用的第三方库，内含所有 bpmn 所用的图形，事件，动作等</li>
<li>lib/draw/BpmnRenderer.js 添加/修改 渲染类型</li>
<li>lib/features/context-pad/ContextPadProvider.js 添加/修改上下文面板菜单</li>
<li>lib/features/modeling/ElementFactory.js 修改图形的默认尺寸</li>
<li>lib/features/palette/PaletteProvider.js 修改调色板菜单内容，分组等</li>
<li>node_modules\bpmn-js-properties-panel\lib\provider\camunda\CamundaPropertiesProvider.js 修改右侧面板选项卡内容</li>
</ul>
<h3 id="3-修改后示例项目"><a href="#3-修改后示例项目" class="headerlink" title="3. 修改后示例项目"></a>3. 修改后示例项目</h3><ul>
<li>依赖引入自有 git 项目，每次库有更新，需要手动执行 npm up 来更新库</li>
<li>使用时可自定义节点属性，进行读写</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dontcallmilanac.github.io/2019/10/30/bpmn-custom/" data-id="ckm6xtqnh000dvurecgsbc621" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/bpmn/" rel="tag">bpmn</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-mini-program" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/11/mini-program/" class="article-date">
  <time datetime="2019-07-11T03:44:34.000Z" itemprop="datePublished">2019-07-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web/">web</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/11/mini-program/">小程序框架情况调研</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>本文探索小程序框架和组件库，这里主要指微信小程序，后续不排除可能需要开发支付宝小程序/XX 小程序等等，所以多平台多端的兼容性也是一项考察指标。下文列举较为流行的框架和组件库。</p>
<h3 id="1-基本需求"><a href="#1-基本需求" class="headerlink" title="1. 基本需求"></a>1. 基本需求</h3><ul>
<li>尽量摆脱“微信语法”-WXML、WXSS、WXS。即使微信语法与 mvvm 框架语法类似，但仍免不了学习成本。</li>
<li>支持 vue 语法或 react 语法，可快速上手</li>
</ul>
<h3 id="2-进阶需求"><a href="#2-进阶需求" class="headerlink" title="2. 进阶需求"></a>2. 进阶需求</h3><ul>
<li>一套代码生成多平台应用</li>
<li>支持 npm</li>
<li>更多组件库支持</li>
</ul>
<h3 id="3-框架对比"><a href="#3-框架对比" class="headerlink" title="3. 框架对比"></a>3. 框架对比</h3><table>
<thead>
<tr>
<th>名称</th>
<th>github stars</th>
<th>语法规范</th>
<th>多平台支持</th>
<th>npm</th>
<th>备注</th>
<th>踩坑记录</th>
</tr>
</thead>
<tbody><tr>
<td><strong><a target="_blank" rel="noopener" href="https://github.com/Tencent/wepy">Tencent / wepy</a></strong></td>
<td>18.2k</td>
<td>类 vue，WXML、WXSS、WXS</td>
<td>微信、支付宝</td>
<td>支持</td>
<td>支持 ES2015+特性，支持多种编译器，支持多种插件处理，支持 Sourcemap，ESLint 等小程序细节优化</td>
<td>1.新版本 2.0 暂不支持支付宝,还是 alpha 版 2.编辑器对.wepy 文件支持不够</td>
</tr>
<tr>
<td><strong><a target="_blank" rel="noopener" href="https://github.com/Meituan-Dianping/mpvue">Meituan-Dianping / mpvue</a></strong></td>
<td>17.9k</td>
<td>vue</td>
<td>微信、百度、头条、支付宝</td>
<td>支持</td>
<td>完整的 Vue.js 开发体验 H5 代码转换编译成小程序目标代码的能力</td>
<td>1.文档将近一年没有维护 新版本 2.0 没有新文档 2.头条小程序报错 bug,暂未解决 3.百度真机调试困难</td>
</tr>
<tr>
<td><strong><a target="_blank" rel="noopener" href="https://github.com/NervJS/taro">NervJS / taro</a></strong></td>
<td>20.0k</td>
<td>react</td>
<td>微信、百度、支付宝、头条、 移动端（React-Native）</td>
<td>npm/yarn</td>
<td>完整的 react 开发体验</td>
<td></td>
</tr>
<tr>
<td><strong><a target="_blank" rel="noopener" href="https://github.com/didi/chameleon">didi / chameleon</a></strong></td>
<td>5.4k</td>
<td>类 vue ，CML + CMSS + JS</td>
<td>微信、百度、支付宝、移动端（Weex）、快应用 qq(alpha)</td>
<td>支持</td>
<td>丰富的官方 api 库、组件库</td>
<td>构建工具安装困难</td>
</tr>
<tr>
<td><strong><a target="_blank" rel="noopener" href="https://github.com/dcloudio/uni-app">dcloudio / uni-app</a></strong></td>
<td>9.3k</td>
<td>vue</td>
<td>微信、百度、支付宝、头条、 移动端（Weex）</td>
<td>支持</td>
<td>官方组件库、api 库 有专用定制 ide: HBuilder</td>
<td></td>
</tr>
</tbody></table>
<h3 id="4-组件库"><a href="#4-组件库" class="headerlink" title="4. 组件库"></a>4. 组件库</h3><table>
<thead>
<tr>
<th>名称</th>
<th>github stars</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td><strong><a target="_blank" rel="noopener" href="https://github.com/Tencent/weui-wxss">Tencent / weui-wxss</a></strong></td>
<td>10.0k</td>
<td>微信官方组件库 WeUI 的小程序版本</td>
</tr>
<tr>
<td><strong><a target="_blank" rel="noopener" href="https://github.com/youzan/vant-weapp">youzan / vant-weapp</a></strong></td>
<td>9.7k</td>
<td>有赞移动端 Vue 组件库 Vant 的小程序版本</td>
</tr>
<tr>
<td><strong><a target="_blank" rel="noopener" href="https://github.com/TalkingData/iview-weapp">TalkingData / iview-weapp</a></strong></td>
<td>4.6k</td>
<td>iview 小程序版</td>
</tr>
<tr>
<td><strong><a target="_blank" rel="noopener" href="https://github.com/meili/minui">meili / minui</a></strong></td>
<td>3.2k</td>
<td>可通过自有构建工具单独安装单个组件</td>
</tr>
<tr>
<td><strong><a target="_blank" rel="noopener" href="https://github.com/wux-weapp/wux-weapp">wux-weapp / wux-weapp</a></strong></td>
<td>3.4k</td>
<td></td>
</tr>
<tr>
<td><strong><a target="_blank" rel="noopener" href="https://github.com/weilanwl/ColorUI">weilanwl / ColorUI</a></strong></td>
<td>4.7k</td>
<td>css 库</td>
</tr>
</tbody></table>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dontcallmilanac.github.io/2019/07/11/mini-program/" data-id="ckm6xtqnu0013vure873q0kh1" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag">小程序</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-wechat-js-sdk" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/02/18/wechat-js-sdk/" class="article-date">
  <time datetime="2019-02-18T09:19:34.000Z" itemprop="datePublished">2019-02-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web/">web</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/18/wechat-js-sdk/">微信公众平台-微信JS-SDK接入</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-申请和认证"><a href="#1-申请和认证" class="headerlink" title="1. 申请和认证"></a>1. 申请和认证</h3><ul>
<li>在微信公众平台申请开发者 ID，通过订阅号或服务号认证后，可取得相应接口权限</li>
</ul>
<h3 id="2-相关配置"><a href="#2-相关配置" class="headerlink" title="2. 相关配置"></a>2. 相关配置</h3><ul>
<li>在微信公众平台登录认证过的公众号，进行开发者相关配置，至少填写如下信息</li>
<li>appID–属于该开发者 ID 的</li>
<li>appsecret–属于该开发者 ID 的</li>
<li>一个能够响应微信验证身份请求的服务接口地址，端口必须为 80（http）或 443（https）</li>
<li>一个自定义的 token，用于微信身份验证</li>
<li>加密方式，用于加密验证的消息。</li>
<li>注：按微信要求，验证接口需原样返回请求参数，故可不做校验，直接返回即可，但安全性不能保证，推荐真正校验通过再返回</li>
<li>JS 接口安全域名–一个公众号最多可绑定 3 个安全域名，每月有三次保存机会。绑定时还需将一个微信提供的文本文件置于项目根目录（视为静态资源），确保配置的安全域名根目录下能够访问该文件。</li>
<li>全部配置并至少保存成功一次，即为接入微信公众平台成功，可调用该公众号拥有权限的所有微信公众平台接口</li>
</ul>
<h3 id="3-采用-js-sdk-调用接口，需验证身份，包括如下步骤"><a href="#3-采用-js-sdk-调用接口，需验证身份，包括如下步骤" class="headerlink" title="3. 采用 js-sdk 调用接口，需验证身份，包括如下步骤"></a>3. 采用 js-sdk 调用接口，需验证身份，包括如下步骤</h3><ul>
<li>获取 access_token–公众号的全局唯一接口调用凭据。每次获取新的时，旧的在 5 分钟后失效，有效期 2 小时。微信要求开发者在全局缓存该 token，因获取 token 接口每日有调用次数限制 2000。</li>
<li>获取 jsapi_ticket–公众号用于调用微信 JS 接口的临时票据。同上，有效期 2 小时，调用次数限制 2000，也需要全局缓存</li>
<li>开发者需按照 <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1421141115">https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1421141115</a> 所提供的算法在服务端进行签名，返回客户端此次调用微信接口的临时签名</li>
<li>至此，完成了微信公众平台-微信 JS-SDK 的接入</li>
</ul>
<h3 id="4-调用微信的接口之前，需调用如下接口"><a href="#4-调用微信的接口之前，需调用如下接口" class="headerlink" title="4. 调用微信的接口之前，需调用如下接口"></a>4. 调用微信的接口之前，需调用如下接口</h3><ul>
<li>调用 wx.config 接口，注入配置信息（包括签名、appId、本次需要调用的接口列表等）。同一个 url 仅需调用一次</li>
<li>调用 wx.ready 接口，在成功回调中，可调用所有本次想使用的微信接口功能，包括分享、图形、音频等。</li>
</ul>
<h3 id="5-页面引入-sdk-文件"><a href="#5-页面引入-sdk-文件" class="headerlink" title="5. 页面引入 sdk 文件"></a>5. 页面引入 sdk 文件</h3><ul>
<li>建议使用 <a target="_blank" rel="noopener" href="https://res.wx.qq.com/open/js/jweixin-1.4.0.js">https://res.wx.qq.com/open/js/jweixin-1.4.0.js</a> 可支持 https 或 http 域名</li>
<li>若使用 <a target="_blank" rel="noopener" href="http://res.wx.qq.com/open/js/jweixin-1.4.0.js">http://res.wx.qq.com/open/js/jweixin-1.4.0.js</a> 则不支持 https 域名</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dontcallmilanac.github.io/2019/02/18/wechat-js-sdk/" data-id="ckm6xtqns000zvure39jdf8th" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js-sdk/" rel="tag">js-sdk</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%BE%AE%E4%BF%A1/" rel="tag">微信</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-mongoose" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/26/mongoose/" class="article-date">
  <time datetime="2018-12-26T08:49:34.000Z" itemprop="datePublished">2018-12-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web/">web</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/26/mongoose/">mongoose</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-什么是-mongoose"><a href="#1-什么是-mongoose" class="headerlink" title="1. 什么是 mongoose"></a>1. 什么是 mongoose</h3><ul>
<li>Mongoose 是在 node.js 环境下对 mongodb 进行便捷操作的对象模型工具</li>
</ul>
<h3 id="2-安装"><a href="#2-安装" class="headerlink" title="2. 安装"></a>2. 安装</h3><ul>
<li>依赖 nodejs 和 mongodb</li>
<li>npm install mongoose –save</li>
<li>require(‘mongoose’)</li>
</ul>
<h3 id="3-connect-用于创建数据库连接"><a href="#3-connect-用于创建数据库连接" class="headerlink" title="3. connect 用于创建数据库连接"></a>3. connect 用于创建数据库连接</h3><ul>
<li>mongoose.connect(url(s), [options], [callback])<ul>
<li>//url(s):数据库地址,可以是多个,以<code>,</code>隔开</li>
<li>//options:可选,配置参数</li>
<li>//callback:可选,回调</li>
</ul>
</li>
<li>mongoose.connect(‘mongodb://用户名:密码@127.0.0.1:27017/数据库名称’)</li>
<li>连接多个 mongoose.connect(‘urlA,urlB,…’, {mongos : true })</li>
<li>mongoose.disconnect() 断开连接</li>
</ul>
<h3 id="4-Schema–Each-schema-maps-to-a-MongoDB-collection-and-defines-the-shape-of-the-documents-within-that-collection"><a href="#4-Schema–Each-schema-maps-to-a-MongoDB-collection-and-defines-the-shape-of-the-documents-within-that-collection" class="headerlink" title="4. Schema–Each schema maps to a MongoDB collection and defines the shape of the documents within that collection."></a>4. Schema–Each schema maps to a MongoDB collection and defines the shape of the documents within that collection.</h3><ul>
<li>主要用于定义 MongoDB 中集合 Collection 里文档 document 的结构,</li>
<li>可以理解为 mongoose 对表结构的定义</li>
<li>(不仅仅可以定义文档的结构和属性，还可以定义文档的实例方法、静态模型方法、复合索引等)，</li>
<li>每个 schema 会映射到 mongodb 中的一个 collection，</li>
<li>schema 不具备操作数据库的能力</li>
<li>String 字符串 Number 数字 Date 日期 Buffer 二进制 Boolean 布尔值 Mixed 混合类型 ObjectId 对象 ID Array 数组</li>
<li>如果需要在 Schema 定义后添加其他字段，可以使用 add()方法</li>
</ul>
<h3 id="5-Model–Models-are-fancy-constructors-compiled-from-Schema-definitions-An-instance-of-a-model-is-called-a-document"><a href="#5-Model–Models-are-fancy-constructors-compiled-from-Schema-definitions-An-instance-of-a-model-is-called-a-document" class="headerlink" title="5. Model–Models are fancy constructors compiled from Schema definitions. An instance of a model is called a document."></a>5. Model–Models are fancy constructors compiled from Schema definitions. An instance of a model is called a document.</h3><ul>
<li>是由 Schema 编译而成的假想（fancy）构造器，具有抽象属性和行为。</li>
<li>Model 的每一个实例（instance）就是一个 document，document 可以保存到数据库和对数据库进行操作。</li>
<li>简单说就是 model 是由 schema 生成的模型，可以对数据库的操作。</li>
<li>实例化文档 document，通过对原型 Model 使用 new 方法，实例化出文档 document 对象</li>
<li>文档保存。必须通过 save()方法，才能将创建的文档保存到数据库的集合中</li>
<li>实例方法和静态方法.区别在于，静态方法是给 model 添加方法，实例方法是给 document 添加方法</li>
<li>Mongoose 会将集合名称设置为模型名称的小写版。如果名称的最后一个字符是字母，则会变成复数；如果名称的最后一个字符是数字，则不变</li>
</ul>
<h3 id="6-Documents–Each-document-is-an-instance-of-its-Model"><a href="#6-Documents–Each-document-is-an-instance-of-its-Model" class="headerlink" title="6. Documents–Each document is an instance of its Model."></a>6. Documents–Each document is an instance of its Model.</h3><h3 id="7-文档新增"><a href="#7-文档新增" class="headerlink" title="7. 文档新增"></a>7. 文档新增</h3><ul>
<li>实例化 model，然后 save()</li>
<li>使用模型 model 的 create()方法，Model.create(doc(s), [callback])</li>
<li>最后一种是模型 model 的 insertMany()方法，Model.insertMany(doc(s), [options], [callback])</li>
</ul>
<h3 id="8-文档查询"><a href="#8-文档查询" class="headerlink" title="8. 文档查询"></a>8. 文档查询</h3><ul>
<li>find()<ul>
<li>第一个参数表示查询条件，第二个参数用于控制返回的字段，第三个参数用于配置查询参数，第四个参数是回调函数</li>
<li>Model.find(conditions, [projection], [options], [callback])</li>
</ul>
</li>
<li>findById()<ul>
<li>Model.findById(id, [projection], [options], [callback])</li>
</ul>
</li>
<li>findOne()<ul>
<li>该方法返回查找到的所有实例的第一个</li>
</ul>
</li>
<li>文档查询中，常用的查询条件如下 （Query and Projection Operators）<ul>
<li>$or 　　　　或关系</li>
<li>$nor 　　　 或关系取反</li>
<li>$gt 　　　　大于</li>
<li>$gte 　　　 大于等于</li>
<li>$lt 　　　　小于</li>
<li>$lte 　　　 小于等于</li>
<li>$ne 　　　　不等于</li>
<li>$in 　　　　在多个值范围内</li>
<li>$nin 　　　 不在多个值范围内</li>
<li>$all 　　　 匹配数组中多个值</li>
<li>$regex 　　 正则，用于模糊查询</li>
<li>$size 　　　匹配数组大小</li>
<li>$maxDistance 　范围查询，距离（基于 LBS）</li>
<li>$mod 　　　　取模运算</li>
<li>$near 　　　 邻域查询，查询附近的位置（基于 LBS）</li>
<li>$exists 　　 字段是否存在</li>
<li>$elemMatch 　匹配内数组内的元素</li>
<li>$within 　　　范围查询（基于 LBS）</li>
<li>$box 　　　　 范围查询，矩形范围（基于 LBS）</li>
<li>$center 　　　范围醒询，圆形范围（基于 LBS）</li>
<li>$centerSphere 　范围查询，球形范围（基于 LBS）</li>
<li>$slice 　　　　查询字段集合中的元素（比如从第几个之后，第 N 到第 M 个元素</li>
</ul>
</li>
</ul>
<h3 id="9-文档更新"><a href="#9-文档更新" class="headerlink" title="9. 文档更新"></a>9. 文档更新</h3><ul>
<li>Model.update(conditions, doc, [options], [callback])<ul>
<li>第一个参数 conditions 为查询条件，第二个参数 doc 为需要修改的数据，第三个参数 options 为控制选项，第四个参数是回调函数</li>
<li>options 有如下选项<ul>
<li>safe (boolean)： 默认为 true。安全模式。</li>
<li>upsert (boolean)： 默认为 false。如果不存在则创建新记录。</li>
<li>multi (boolean)： 默认为 false。是否更新多个查询记录。</li>
<li>runValidators： 如果值为 true，执行 Validation 验证。</li>
<li>setDefaultsOnInsert： 如果 upsert 选项为 true，在新建时插入文档定义的默认值。</li>
<li>strict (boolean)： 以 strict 模式进行更新。</li>
<li>overwrite (boolean)： 默认为 false。禁用 update-only 模式，允许覆盖记录。</li>
</ul>
</li>
</ul>
</li>
<li>updateMany()与 update()方法唯一的区别就是默认更新多个文档，即使设置{multi:false}也无法只更新第一个文档</li>
<li>如果需要更新的操作比较复杂，可以使用 find()+save()方法来处理</li>
<li>updateOne()方法只能更新找到的第一条数据，即使设置{multi:true}也无法同时更新多个文档</li>
<li>findOne() + save()</li>
<li>Model.findOneAndUpdate([conditions], [update], [options], [callback])</li>
<li>Model.findByIdAndUpdate([conditions], [update], [options], [callback])</li>
<li>操作符 <a target="_blank" rel="noopener" href="https://docs.mongodb.com/v2.4/reference/operator/update/">Update Operators</a></li>
</ul>
<h3 id="10-文档删除"><a href="#10-文档删除" class="headerlink" title="10. 文档删除"></a>10. 文档删除</h3><ul>
<li>remove<ul>
<li>model.remove(conditions, [callback])</li>
<li>document.remove([callback])</li>
</ul>
</li>
<li>Model.findOneAndRemove(conditions, [options], [callback])</li>
<li>Model.findByIdAndRemove(id, [options], [callback])</li>
</ul>
<h3 id="11-查询后处理"><a href="#11-查询后处理" class="headerlink" title="11. 查询后处理"></a>11. 查询后处理</h3><ul>
<li>sort 排序 按某字段排序</li>
<li>skip 跳过 做任何操作前跳过若干</li>
<li>limit 限制 规定最大返回数量</li>
<li>select 显示字段 规定显示的字段</li>
<li>count 计数 计数查询结果</li>
<li>distinct 去重 统计某字段值的情况</li>
<li>exect 执行 执行最终查询</li>
</ul>
<h3 id="12-文档验证"><a href="#12-文档验证" class="headerlink" title="12. 文档验证"></a>12. 文档验证</h3><ul>
<li>Validation is defined in the SchemaType 定义在 schema 中</li>
<li>Validation is middleware. Mongoose registers validation as a pre(‘save’) hook on every schema by default.中间件，默认注册了 pre(‘save’) 钩子</li>
<li>You can manually run validation using doc.validate(callback) or doc.validateSync() 可手动运行</li>
<li>Validators are not run on undefined values. The only exception is the required validator. 未定义值不会校验</li>
<li>Validation is asynchronously recursive; when you call Model#save, sub-document validation is executed as well. If an error occurs, your Model#save callback receives it 嵌套异步执行</li>
<li>Validation is customizable 自定义</li>
<li>规则<ul>
<li>required: 数据必须填写</li>
<li>default: 默认值</li>
<li>validate: 自定义匹配</li>
<li>min: 最小值(只适用于数字)</li>
<li>max: 最大值(只适用于数字)</li>
<li>match: 正则匹配(只适用于字符串)</li>
<li>enum: 枚举匹配(只适用于字符串)</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dontcallmilanac.github.io/2018/12/26/mongoose/" data-id="ckm6xtqnp000qvurebfk7dlvx" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mongo/" rel="tag">mongo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mongoose/" rel="tag">mongoose</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-linux-node" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/29/linux-node/" class="article-date">
  <time datetime="2018-11-29T09:10:34.000Z" itemprop="datePublished">2018-11-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web/">web</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/29/linux-node/">在linux从0搭建node环境</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-下载压缩包（二进制，非源码）"><a href="#1-下载压缩包（二进制，非源码）" class="headerlink" title="1. 下载压缩包（二进制，非源码）"></a>1. 下载压缩包（二进制，非源码）</h3><ul>
<li>选择需要的版本，平台一般为 linux-x64（运维提供的系统版本）</li>
<li>选择压缩格式 一般选择 tar.gz (包较大，但解压方便)</li>
<li>node-v8.10.0-linux-x64.tar.gz （17960765kb）</li>
<li>命令 wget <a target="_blank" rel="noopener" href="https://nodejs.org/download/release/v8.10.0/node-v8.10.0-linux-x64.tar.gz">https://nodejs.org/download/release/v8.10.0/node-v8.10.0-linux-x64.tar.gz</a></li>
</ul>
<h3 id="2-解压缩即安装"><a href="#2-解压缩即安装" class="headerlink" title="2. 解压缩即安装"></a>2. 解压缩即安装</h3><ul>
<li>选择解压目录</li>
<li>命令 tar -xvf node-v8.10.0-linux-x64.tar.gz</li>
<li>解压到当前目录，也可改变目标目录 -C</li>
</ul>
<h3 id="3-全局使用"><a href="#3-全局使用" class="headerlink" title="3. 全局使用"></a>3. 全局使用</h3><ul>
<li>想在全局环境使用 node 命令及 npm 全局安装的包</li>
<li>需要向系统声明 node 可执行文件及全局包的位置 →PATH 环境变量</li>
<li>/usr/bin/ 、/usr/local/bin。。。</li>
<li>方法：建立软链、直接修改环境变量</li>
<li>软链：命令 ln -s /usr/local/node-v8.10.0-linux-x64/bin/node /usr/bin/node 同理建立 npm pm2 的，pm2 可先用 npm 安装</li>
<li>修改变量：export PATH=/usr/local/node-v8.10.0-linux-x64/bin:$PATH （针对当前用户）</li>
<li>多种途径：/etc/profile、/etc/profile.d、/home/dev-user/.bashrc 等</li>
<li>注意：由于 npm 等包经常需要读写权限，还需要赋予 node 所在位置的读写权限给当前用户(修改属主也可)。</li>
<li>sudo chown dev-user:dev-user /usr/local/node-v8.10.0-linux-x64/ -R</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dontcallmilanac.github.io/2018/11/29/linux-node/" data-id="ckm6xtqni000evure7cmhd4vl" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/node/" rel="tag">node</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-app-h5-interact" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/10/29/app-h5-interact/" class="article-date">
  <time datetime="2018-10-29T07:47:34.000Z" itemprop="datePublished">2018-10-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web/">web</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/10/29/app-h5-interact/">app与h5交互方案探索</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-基本需求场景-h5-需要一些只能在-app-端获取的参数、数据"><a href="#1-基本需求场景-h5-需要一些只能在-app-端获取的参数、数据" class="headerlink" title="1. 基本需求场景 h5 需要一些只能在 app 端获取的参数、数据"></a>1. 基本需求场景 h5 需要一些只能在 app 端获取的参数、数据</h3><ul>
<li>产品的需求不能在 h5 端独立实现</li>
</ul>
<h3 id="2-进阶需求场景"><a href="#2-进阶需求场景" class="headerlink" title="2. 进阶需求场景"></a>2. 进阶需求场景</h3><ul>
<li>同样的需求，在做好设备适配情况下，在 h5 端实现能够节省人力成本（一套代码运行在两种设备上）</li>
<li>在 h5 端实现的需求，版本控制较为灵活，不依赖应用平台（应用审核等方面原因）</li>
<li>如果有可能，在 h5 端实现一套代码逻辑适配两种设备能够进一步提升开发效率（无需分别与 app 两端联调）</li>
</ul>
<h3 id="3-社区流行方案"><a href="#3-社区流行方案" class="headerlink" title="3. 社区流行方案"></a>3. 社区流行方案</h3><table>
<thead>
<tr>
<th>名称</th>
<th>github stars</th>
<th>地址</th>
<th>最近更新时间</th>
<th>注</th>
</tr>
</thead>
<tbody><tr>
<td>JsBridge</td>
<td>7.2k</td>
<td><a target="_blank" rel="noopener" href="https://github.com/lzyzsd/JsBridge">https://github.com/lzyzsd/JsBridge</a></td>
<td>9 days ago</td>
<td>最为流行，但 h5 端未实现统一 api，因为本身就是两个项目，只是两端分别最流行的方案的组合，近期也未有更新</td>
</tr>
<tr>
<td>WebViewJavascriptBridge</td>
<td>12.8k</td>
<td><a target="_blank" rel="noopener" href="https://github.com/marcuswestin/WebViewJavascriptBridge">https://github.com/marcuswestin/WebViewJavascriptBridge</a></td>
<td>2 years ago</td>
<td></td>
</tr>
<tr>
<td>DSBridge-Android</td>
<td>2.0k</td>
<td><a target="_blank" rel="noopener" href="https://github.com/wendux/DSBridge-Android">https://github.com/wendux/DSBridge-Android</a></td>
<td>10 months ago</td>
<td>h5 端有统一 api，近期有更新，但不够流行</td>
</tr>
<tr>
<td>DSBridge-IOS</td>
<td>1.1k</td>
<td><a target="_blank" rel="noopener" href="https://github.com/wendux/DSBridge-IOS">https://github.com/wendux/DSBridge-IOS</a></td>
<td>1 year ago</td>
<td></td>
</tr>
<tr>
<td>quickhybrid</td>
<td>0.3k</td>
<td><a target="_blank" rel="noopener" href="https://github.com/quickhybrid/quickhybrid/">https://github.com/quickhybrid/quickhybrid/</a></td>
<td>2 years ago</td>
<td>形成了一套设计理论，较为全面，可提供理论支持，但不够流行，最近更新时间也较久远</td>
</tr>
</tbody></table>
<h3 id="4-目前我们的解决方案"><a href="#4-目前我们的解决方案" class="headerlink" title="4. 目前我们的解决方案"></a>4. 目前我们的解决方案</h3><ul>
<li>较为混杂，一般为采用 WebViewJavascriptBridge 和 JsBridge</li>
</ul>
<h3 id="5-quickhybrid-中的设计理论"><a href="#5-quickhybrid-中的设计理论" class="headerlink" title="5. quickhybrid 中的设计理论"></a>5. quickhybrid 中的设计理论</h3><ul>
<li><a target="_blank" rel="noopener" href="https://quickhybrid.github.io/quickhybrid-doc/howto/quickhybrid_preface/quickhybrid_preface.html">https://quickhybrid.github.io/quickhybrid-doc/howto/quickhybrid_preface/quickhybrid_preface.html</a></li>
</ul>
<h3 id="6-理想状态"><a href="#6-理想状态" class="headerlink" title="6. 理想状态"></a>6. 理想状态</h3><ul>
<li>因为社区并没有一个较为理想（流行度、实时性、统一性）的综合解决方案，所以理想状态还是应该基于我们自己的实际需求，设计并三端实现一套自己的框架，类似于小桔猫社区中发贴规则的自定义协议实现</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dontcallmilanac.github.io/2018/10/29/app-h5-interact/" data-id="ckm6xtqnd0007vure6rrs3ek8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hybrid/" rel="tag">hybrid</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ESLint" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/16/ESLint/" class="article-date">
  <time datetime="2018-07-16T07:22:34.000Z" itemprop="datePublished">2018-07-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/web/">web</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/16/ESLint/">ESLint</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-什么是-eslint"><a href="#1-什么是-eslint" class="headerlink" title="1. 什么是 eslint"></a>1. 什么是 eslint</h3><ul>
<li>ESLint 是一个开源的 JavaScript 代码检查工具，由 Nicholas C. Zakas 于 2013 年 6 月创建。</li>
<li>代码检查是一种静态的分析，常用于寻找有问题的模式或者代码，并且不依赖于具体的编码风格。对大多数编程语言来说都会有代码检查，一般来说编译程序会内置检查工具。</li>
<li>JavaScript 是一个动态的弱类型语言，在开发中比较容易出错。因为没有编译程序，为了寻找 JavaScript 代码错误通常需要在执行过程中不断调试。像 ESLint 这样的可以让程序员在编码的过程中发现问题而不是在执行的过程中。</li>
<li>ESLint 的初衷是为了让程序员可以创建自己的检测规则。ESLint 的所有规则都被设计成可插入的。ESLint 的默认规则与其他的插件并没有什么区别，规则本身和测试可以依赖于同样的模式。</li>
<li>为了便于人们使用，ESLint 内置了一些规则，当然，你可以在使用过程中自定义规则。</li>
<li>ESLint 使用 Node.js 编写，这样既可以有一个快速的运行环境的同时也便于安装。</li>
</ul>
<h3 id="2-如何使用"><a href="#2-如何使用" class="headerlink" title="2. 如何使用"></a>2. 如何使用</h3><ul>
<li>在 vscode 中，安装插件 ESLint。eslint 的必备环境为 nodejs，这个插件能够使 vscode 自动完成一些工作，帮助我们更好地使用 eslint。如修改文件时自动检查，配置全局规则，对不同类型文件使用不同的检查策略等。<br>安装好后，在编辑器的全局配置中，建议如下配置。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&quot;eslint.autoFixOnSave&quot;: true,&#x2F;&#x2F;尝试在保存文件时自动修复（仅限少数简单的可自动修复错误）</span><br><span class="line">&quot;eslint.validate&quot;: [&#x2F;&#x2F;规定需要被检查的文件类型，autofix选项规定是否自动修复</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;language&quot;: &quot;javascript&quot;,</span><br><span class="line">        &quot;autoFix&quot;: true</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;language&quot;: &quot;javascriptreact&quot;,</span><br><span class="line">        &quot;autoFix&quot;: true</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;language&quot;: &quot;html&quot;,</span><br><span class="line">        &quot;autoFix&quot;: true</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;language&quot;: &quot;vue&quot;,</span><br><span class="line">        &quot;autoFix&quot;: true</span><br><span class="line">    &#125;</span><br><span class="line">],</span><br><span class="line">&quot;eslint.alwaysShowStatus&quot;: true,&#x2F;&#x2F;总是显示eslint状态</span><br><span class="line">&quot;eslint.run&quot;: &quot;onSave&quot;&#x2F;&#x2F;在保存文件时运行eslint（而不是改变文件类型时，onType）</span><br></pre></td></tr></table></figure>

<ul>
<li>可在全局环境安装 eslint 包，也可在单独项目中安装。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install eslint -g</span><br><span class="line">npm install eslint</span><br></pre></td></tr></table></figure>

<ul>
<li>在项目中可单独配置文件.eslintignore，规定让 eslint 忽略的所有文件和路径；</li>
<li>可配置.eslintrc.js 文件规定 eslint 的全部配置。以下详细解释配置文件的各项内容：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">module.exports &#x3D; &#123;</span><br><span class="line"> root: true,&#x2F;&#x2F;规定此目录为根级，即无需再向上匹配检查</span><br><span class="line"> parserOptions: &#123;&#x2F;&#x2F;规定使用的解析器</span><br><span class="line">    parser: &#39;babel-eslint&#39;&#x2F;&#x2F;这里由于用到了es6，所以推荐使用babel-eslint</span><br><span class="line">  &#125;,</span><br><span class="line">  env: &#123;&#x2F;&#x2F;可规定运行环境</span><br><span class="line">    browser: true,&#x2F;&#x2F;此为浏览器环境</span><br><span class="line">  &#125;,</span><br><span class="line">  extends: [&#x2F;&#x2F;规定了需要扩展应用的规则集</span><br><span class="line">    &#39;plugin:vue&#x2F;essential&#39;,&#x2F;&#x2F;这里由于使用了vue，推荐加上</span><br><span class="line">    &#39;standard&#39;&#x2F;&#x2F;这个规则集是使用较为普遍的一种，同样的还有其他规则集可以采用</span><br><span class="line">  ],</span><br><span class="line">  plugins: [&#x2F;&#x2F;提供各种功能的插件</span><br><span class="line">    &#39;vue&#39;</span><br><span class="line">  ],</span><br><span class="line">  rules: &#123;&#x2F;&#x2F;自定义规则，优先级最高</span><br><span class="line">    &quot;indent&quot;: [&quot;error&quot;, 4],</span><br><span class="line">    &#x2F;&#x2F; allow async-await</span><br><span class="line">    &#39;generator-star-spacing&#39;: &#39;off&#39;,</span><br><span class="line">    &#x2F;&#x2F; allow debugger during development</span><br><span class="line">    &#39;no-debugger&#39;: process.env.NODE_ENV &#x3D;&#x3D;&#x3D; &#39;production&#39; ? &#39;error&#39; : &#39;off&#39;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>配置文件还可为以下格式，eslint 的读取顺序如下： .eslintrc.js –&gt; .eslintrc.yaml–&gt;.eslintrc.yml–&gt;.eslintrc.json–&gt;.eslintrc–&gt;package.json</li>
<li>还可与 webpack 配合使用，达到打包时自动进行检查，并给出提示的效果。需要在项目中安装 eslint-loader 包，并配置相应规则。推荐配置如下：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">module: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">    &#123;</span><br><span class="line">        test: &#x2F;\.(js|vue)$&#x2F;,&#x2F;&#x2F;需要匹配的文件</span><br><span class="line">        loader: &#39;eslint-loader&#39;,&#x2F;&#x2F;加载器名称</span><br><span class="line">        enforce: &#39;pre&#39;,&#x2F;&#x2F;规定为预编译</span><br><span class="line">        include: [resolve(&#39;src&#39;), resolve(&#39;test&#39;)],&#x2F;&#x2F;指定作用目录</span><br><span class="line">        options: &#123;&#x2F;&#x2F;可选配置</span><br><span class="line">            formatter: require(&#39;eslint-friendly-formatter&#39;),&#x2F;&#x2F;错误输出格式友好</span><br><span class="line">            emitWarning: true&#x2F;&#x2F;尝试报错（而不是警告）</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-代码检查相关"><a href="#3-代码检查相关" class="headerlink" title="3. 代码检查相关"></a>3. 代码检查相关</h3><ul>
<li>正确地使用 eslint，能够避免我们日常开发中，大部分的书写疏忽、语法错误等，还能够对不规范的写法进行约束，久而久之能够形成良好的代码书写习惯，更会有利于团队协作开发，代码维护等。</li>
<li>还有 htmlhint，stylelint 等工具，可对 html、css 等经常涉及到的文件进行语法或书写规范检查，后续可以进一步调研，并应用到项目开发中去。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dontcallmilanac.github.io/2018/07/16/ESLint/" data-id="ckm6xtqn60001vureh3lhe14k" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/eslint/" rel="tag">eslint</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-LF-CRLF" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/09/LF-CRLF/" class="article-date">
  <time datetime="2018-07-09T07:39:19.000Z" itemprop="datePublished">2018-07-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux/">linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/09/LF-CRLF/">LF &amp; CRLF</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-什么是-CRLF-和-LF"><a href="#1-什么是-CRLF-和-LF" class="headerlink" title="1. 什么是 CRLF 和 LF"></a>1. 什么是 CRLF 和 LF</h3><ul>
<li>CR, ASCII 13, \r 回车</li>
<li>LF, ASCII 10, \n 换行</li>
<li>CRLF 是 Carriage-Return / Line-Feed 的缩写，意思是回车/换行</li>
<li>LF 指代换行</li>
</ul>
<h3 id="2-使用场景"><a href="#2-使用场景" class="headerlink" title="2. 使用场景"></a>2. 使用场景</h3><ul>
<li>CRLF -&gt; Windows-Style 表示句尾使用回车换行两个字符（”\r\n”）</li>
<li>LF -&gt; Unix-Style 表示句尾只使用换行（”\n”）</li>
<li>CR -&gt; Mac-Style 表示句尾只使用回车（”\r”）</li>
<li>正确使用可避免 CRLF 注入攻击</li>
</ul>
<h3 id="3-Git-设置"><a href="#3-Git-设置" class="headerlink" title="3. Git 设置"></a>3. Git 设置</h3><ul>
<li>AutoCRLF</li>
</ul>
<ol>
<li>提交时转换为 LF，检出时转换为 CRLF</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global core.autocrlf true</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>提交时转换为 LF，检出时不转换 (因此建议在 window 操作系统下，不要使用这个设置)</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global core.autocrlf input</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>提交检出均不转换</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global core.autocrlf false</span><br></pre></td></tr></table></figure>

<ul>
<li>SafeCRLF</li>
</ul>
<ol>
<li>拒绝提交包含混合换行符的文件</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global core.safecrlf true</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>允许提交包含混合换行符的文件</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global core.safecrlf false</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>提交包含混合换行符的文件时给出警告</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global core.safecrlf warn</span><br></pre></td></tr></table></figure>

<h3 id="4-图示"><a href="#4-图示" class="headerlink" title="4. 图示"></a>4. 图示</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">core.autocrlf&#x3D;true:      core.autocrlf&#x3D;input:     core.autocrlf&#x3D;false:</span><br><span class="line">        repo                     repo                     repo</span><br><span class="line">      ^      V                 ^      V                 ^      V</span><br><span class="line">     &#x2F;        \               &#x2F;        \               &#x2F;        \</span><br><span class="line">crlf-&gt;lf    lf-&gt;crlf      crlf-&gt;lf       \             &#x2F;          \</span><br><span class="line">   &#x2F;            \           &#x2F;            \           &#x2F;            \</span><br></pre></td></tr></table></figure>

<h3 id="5-编辑器设置"><a href="#5-编辑器设置" class="headerlink" title="5. 编辑器设置"></a>5. 编辑器设置</h3><ul>
<li>vs code 中，可设置 “files.eol”: “\r\n” 来修改</li>
</ul>
<h3 id="6-最终解决方案"><a href="#6-最终解决方案" class="headerlink" title="6. 最终解决方案"></a>6. 最终解决方案</h3><ul>
<li>.editorconfig 文件中，设置 end_of_line = crlf</li>
<li>git config –global core.autocrlf true 取默认值，无需单独设置</li>
<li>编辑器设置 User Settings 中 “files.eol”: “\r\n” 取默认值，无需单独设置</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://dontcallmilanac.github.io/2018/07/09/LF-CRLF/" data-id="ckm6xtqna0003vure4lha37b8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/crlf/" rel="tag">crlf</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/lf/" rel="tag">lf</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/MDS/" rel="tag">MDS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/antd/" rel="tag">antd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ast2400/" rel="tag">ast2400</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bpmn/" rel="tag">bpmn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/crlf/" rel="tag">crlf</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/design-pattern/" rel="tag">design pattern</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dhcp/" rel="tag">dhcp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eslint/" rel="tag">eslint</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/" rel="tag">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hybrid/" rel="tag">hybrid</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ipmi/" rel="tag">ipmi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jacman/" rel="tag">jacman</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js-sdk/" rel="tag">js-sdk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lf/" rel="tag">lf</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongo/" rel="tag">mongo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongoose/" rel="tag">mongoose</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/" rel="tag">node</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/" rel="tag">nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/" rel="tag">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pxe/" rel="tag">pxe</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/" rel="tag">react</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redhat/" rel="tag">redhat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yum/" rel="tag">yum</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85-%E8%A7%82%E5%AF%9F%E8%80%85/" rel="tag">发布订阅/观察者</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%9A%E8%AF%B4/" rel="tag">多说</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag">小程序</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%AE%E4%BF%A1/" rel="tag">微信</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/MDS/" style="font-size: 10px;">MDS</a> <a href="/tags/antd/" style="font-size: 10px;">antd</a> <a href="/tags/ast2400/" style="font-size: 10px;">ast2400</a> <a href="/tags/bpmn/" style="font-size: 10px;">bpmn</a> <a href="/tags/crlf/" style="font-size: 10px;">crlf</a> <a href="/tags/design-pattern/" style="font-size: 10px;">design pattern</a> <a href="/tags/dhcp/" style="font-size: 10px;">dhcp</a> <a href="/tags/eslint/" style="font-size: 10px;">eslint</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/hybrid/" style="font-size: 10px;">hybrid</a> <a href="/tags/ipmi/" style="font-size: 10px;">ipmi</a> <a href="/tags/jacman/" style="font-size: 10px;">jacman</a> <a href="/tags/js-sdk/" style="font-size: 10px;">js-sdk</a> <a href="/tags/lf/" style="font-size: 10px;">lf</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/mongo/" style="font-size: 10px;">mongo</a> <a href="/tags/mongoose/" style="font-size: 10px;">mongoose</a> <a href="/tags/node/" style="font-size: 10px;">node</a> <a href="/tags/nodejs/" style="font-size: 10px;">nodejs</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/pxe/" style="font-size: 10px;">pxe</a> <a href="/tags/react/" style="font-size: 10px;">react</a> <a href="/tags/redhat/" style="font-size: 20px;">redhat</a> <a href="/tags/yum/" style="font-size: 10px;">yum</a> <a href="/tags/%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85-%E8%A7%82%E5%AF%9F%E8%80%85/" style="font-size: 10px;">发布订阅/观察者</a> <a href="/tags/%E5%A4%9A%E8%AF%B4/" style="font-size: 10px;">多说</a> <a href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" style="font-size: 10px;">小程序</a> <a href="/tags/%E5%BE%AE%E4%BF%A1/" style="font-size: 10px;">微信</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">September 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/03/13/pubsub-vs-observer/">pubsub-vs-observer</a>
          </li>
        
          <li>
            <a href="/2020/11/16/antd-combobox/">antd-combobox</a>
          </li>
        
          <li>
            <a href="/2019/10/30/bpmn-custom/">bpmn-js自定义开发</a>
          </li>
        
          <li>
            <a href="/2019/07/11/mini-program/">小程序框架情况调研</a>
          </li>
        
          <li>
            <a href="/2019/02/18/wechat-js-sdk/">微信公众平台-微信JS-SDK接入</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 qibw<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>